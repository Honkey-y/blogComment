# **<a name="one">Springé¡¹ç›®çš„æ­å»º</a>** 

F:\å­¦ä¹ \Spring Bootå­¦ä¹ èµ„æ–™\SpringBoot Test01

**Spring Bootï¼ˆå¾®æ¡†æ¶ï¼‰ = springmvcï¼ˆæ§åˆ¶å™¨ï¼‰ + springcoreï¼ˆé¡¹ç›®ç®¡ç†ï¼‰**

## ç¡®å®šä¸ºMavené¡¹ç›®

![image-20220223151554157](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220223151554157.png)

- ç‚¹å‡»åˆ›å»ºMavenï¼Œå¹¶ä¸”å‹¾é€‰`Create form archetype`

â€‹				ç”šè‡³å¯ä»¥ä½¿ç”¨æ›´åŠ ç®€ç•¥çš„æ–¹æ³•ï¼Œç›´æ¥Nextä¸‹ä¸€æ­¥

## åœ¨testä¸­æ–°å»ºæ–‡ä»¶ â€œresourcesâ€ å¹¶ä¿®æ”¹ä¸ºResourcesæ–‡ä»¶å¹¶å¯¼å…¥ä¾èµ–

![image-20220223151735738](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220223151735738.png)



â€‹	**POMæ–‡ä»¶ä¾èµ–å¯¼å…¥**

â€‹		é¦–å…ˆåœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ 

```
<!--ç»§æ‰¿springbootçˆ¶ç±» ä¾¿äºç»´æŠ¤ç‰ˆæœ¬-->
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.4.2</version>
</parent>

<!--spring-boot-stater-web-->
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
</dependencies>
```

## recouresç›®å½•ä¸‹åˆ›å»ºapplication.ymlæ–‡ä»¶**

- åœ¨mainæ–‡ä»¶ä¸‹åˆ›å»ºæ¥å£ç±» â€œXXXApplicationâ€ï¼Œå¹¶ä¸”åˆ›å»ºä¸€äº›éœ€è¦æ¨¡å—çš„æ–‡ä»¶å¤¹

![image-20220223151754613](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220223151754613.png)

- åœ¨Applicationç±»ä¸­æ·»åŠ æ³¨è§£:`@SpringBootApplication`

```
@SpringBootApplication
public class SpringBootTest01Application {
    public static void main(String[] args) {

        //å¯åŠ¨Springbootåº”ç”¨  å‚æ•°1ï¼šæŒ‡å®šå…¥å£ç±»çš„å¯¹è±¡  å‚æ•°2ï¼šmainå‡½æ•°å‚æ•°
        SpringApplication.run(SpringApplication.class,args);
    }
}
```

â€‹		**æ€»ç»“**

1. pomæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–

2. resourcesç”Ÿæˆapplication.ymlæ–‡ä»¶

3. åˆ›å»ºå…¥å£ç±»å¹¶æ·»åŠ @SpringBootApplicationæ³¨è§£,åœ¨mainä¸­å¯åŠ¨åº”ç”¨

   

## åœ¨controlleræ–‡ä»¶ä¸­åˆ›å»ºæ§åˆ¶å™¨ç±»

â€‹		åœ¨æ–‡ä»¶å¤´ä¸­æ·»åŠ `@RestController`æ³¨è§£

â€‹		åœ¨ç±»ä¸­æµ‹è¯•æ§åˆ¶å™¨æ˜¯å¦æœ‰æ•ˆï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```
@RequestMapping("hello")
public String hello(){
      System.out.println("hello springboot....");
      return "hello springboot";
}
```

- springbooté¡¹ç›®æµ‹è¯•åœ°å€ï¼šlocalhost:ç«¯å£å·/è¯·æ±‚è·¯å¾„



**ğŸ”¥æ³¨æ„**

â€‹		springbooté¡¹ç›®é»˜è®¤å¯åŠ¨æ²¡æœ‰é¡¹ç›®å `http://localhost:8080/hello`

- **ä¿®æ”¹å†…åµŒæœåŠ¡å™¨çš„ç«¯å£å·**

â€‹		åœ¨applicationä¸­æ·»åŠ ä»¥ä¸‹ä»£ç 

```
#ç«¯å£ä¿®æ”¹ä¸º8081
sever:
  port:8081
  servlet:
    context-path:/springbootTest01 #ä¿®æ”¹é¡¹ç›®åï¼Œæ³¨æ„ï¼šé¡¹ç›®åå¿…é¡»"/"å¼€å¤´
```

***









# **ç›¸å…³æ³¨è§£ä¸é…ç½®æ–‡ä»¶æ‹†åˆ†ä»¥åŠåŠ è½½å¤–éƒ¨æ–‡ä»¶**

## **SpringBootApplicationæ³¨è§£**

ç»„åˆæ³¨è§£ï¼šç”±**å¤šä¸ªæ³¨è§£**ç»„åˆè€Œæˆçš„**ä¸€ä¸ªæ³¨è§£**

å…ƒæ³¨è§£ï¼šç”¨æ¥ä¿®é¥°æ³¨è§£çš„æ³¨è§£

`@Target`ï¼šæŒ‡å®šæ³¨è§£ä½œç”¨èŒƒå›´

`@Retention`ï¼šæŒ‡å®šæ³¨è§£ä»€ä¹ˆæ—¶å€™æœ‰æ•ˆ

`@SpringBootConfiguration`ï¼šè‡ªåŠ¨é…ç½®spring springmvcï¼ˆåˆå§‹åŒ–servletï¼‰ç›¸å…³çš„ç¯å¢ƒé…ç½®

`@EnableAutoConfiguration`ï¼šå¼€å¯è‡ªåŠ¨é…ç½® è‡ªåŠ¨é…ç½®æ ¸å¿ƒæ³¨è§£ è‡ªåŠ¨é…ç½®springç›¸å…³ç¯å¢ƒ è‡ªåŠ¨ä¸é¡¹ç›®ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹æŠ€æœ¯è‡ªåŠ¨é…ç½®

â€‹		mybatis-springbootã€redis-springbootã€es-springbootã€rabbitmqç¬¬ä¸‰æŠ€æœ¯

`@ComponentScan`ï¼š<u>**ç»„ä»¶æ‰«æ**</u> æ ¹æ®æ³¨è§£å‘æŒ¥æ³¨è§£ä½œç”¨ é»˜è®¤æ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…![image-20220223153321749](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220223153321749.png)

å¯åŠ¨springbootåº”ç”¨æ—¶éœ€è¦ä¼ é€’mainå‡½æ•°å‚æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°

***

## **å¤šç”Ÿæ€å¼€å‘ç¯å¢ƒ**

![image-20220223153454189](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220223153454189.png)

> æ³¨æ„ï¼šåœ¨å…¬å…±Applicationé…ç½®æ–‡ä»¶ä¸­ï¼Œspring.profiles.active:xxxï¼ˆå…·ä½“çœ‹éœ€è¦å“ªä¸ªç¯å¢ƒç”Ÿæ•ˆï¼‰

***

## **è°ƒç”¨å¤–éƒ¨applicationé…ç½®æ–‡ä»¶**

â€‹		**ä¼ä¸šä½¿ç”¨å±…å¤š**

1. å°†applicationå¤–éƒ¨æ–‡ä»¶å¤åˆ¶ç»å¯¹è·¯å¾„
2. æ‰“å¼€æœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒé…ç½®
3. åœ¨`program arguments`ä¸­æ·»åŠ `--spring.config.location=ç»å¯¹è·¯å¾„`

![image-20220223153526842](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220223153526842.png)





***









# **å·¥å‚åˆ›å»ºå¯¹è±¡ä¸å±æ€§æ³¨å…¥**

**<u>springboot å¾®æ¡†æ¶ = springï¼ˆå·¥å‚ï¼‰ + springmvcï¼ˆæ§åˆ¶å™¨ï¼‰</u>**

## å·¥å‚åˆ›å»ºå¯¹è±¡ï¼š

### ä¸€ã€ springå·¥å‚ï¼šåˆ›å»ºå¯¹è±¡

â€‹			**åŸºäºé…ç½®æ–‡ä»¶å½¢å¼åˆ›å»ºå¯¹è±¡ `spring.xml`**

```
<bean id="" class="xxx.xxServletTmpl"/>
```

â€‹		**åŸºäºæ³¨è§£æ–¹å¼åˆ›å»ºå¯¹è±¡**

â€‹			`@Component` ï¼šå·¥å‚ä¸­åˆ›å»ºå¯¹è±¡ é€šç”¨å¯¹è±¡åˆ›å»ºæ³¨è§£

â€‹			`			@Controller`ï¼šåˆ›å»ºæ§åˆ¶å™¨æ³¨è§£

â€‹			`@Service`ï¼šåˆ›å»ºä¸šåŠ¡å±‚æ³¨è§£

â€‹			`						@Repository`ï¼šåˆ›å»ºDaoå±‚æ³¨è§£ mybatis

***

### äºŒã€SpringBootåˆ›å»ºå¯¹è±¡ï¼š

â€‹	**ä½¿ç”¨é…ç½®æ–¹å¼åˆ›å»ºå¯¹è±¡**

â€‹	`@Configuration`ï¼šä¿®é¥°èŒƒå›´ï¼šç”¨åœ¨ç±»ä¸Š ==========>spring.xml ä»£è¡¨è¿™ä¸ªç±»æ˜¯ ***é…ç½®ç±»\***

â€‹	`@Bean`ï¼šåˆ›å»ºå¯¹è±¡ï¼Œç›¸å½“äºspring.xml ä¹¦å†™bean

```
@Configuration
public class BeanConfig{
      @Bean
      public User user(){
          return new user();
      }
       @Bean
      public Emp emp(){
          return new emp();
      }
      ..........
}
```



- **å®ä¾‹ï¼š**

1. åˆ›å»º`demoController`æ§åˆ¶å™¨

```
@RestController
public class demoController {

    //æ‰¾åˆ°serviceä¸šåŠ¡ï¼Œå¹¶æŒ‡å®šè·¯å¾„
    @Autowired
    @Qualifier(value = "demos") //ç”¨æ¥ä¿®æ”¹autowiredçš„é»˜è®¤ä¸åœ¨æ ¹æ®ç±»å‹æ³¨å…¥ ä¿®æ”¹ä¸ºæ ¹æ®åç§°æ³¨å…¥
    private demoservice d;

    @RequestMapping("demo")
    String demo(){
        System.out.println("demo");
        //è°ƒç”¨Serviceä¸šåŠ¡
        d.demo();
        return "demo ok";
    }
}
```

1. åˆ›å»º`demoService`ä¸šåŠ¡å±‚æ¥å£

```
public interface demoservice {
    public void demo();
}
```

1. åˆ›å»º`demoServiceimpl`ä¸šåŠ¡ç±»å®ç°æ¥å£

```
//è¡¨æ˜æ˜¯Serviceä¸šåŠ¡ï¼Œå¹¶æŒ‡å®šè·¯å¾„åç§°
@Service("demos")
public class demoserviceimpl implements demoservice{

    //å®ç°æ¥å£æ–¹æ³•
    @Override
    public void demo() {
        System.out.println("serviceæ³¨å…¥æˆåŠŸ");
    }
}
```



=============

### ä¸‰ã€åˆ›å»ºå¤šä¸ªå¯¹è±¡

â€‹		å¦‚ä½•åœ¨springbootä¸­åƒspringæ¡†æ¶ä¸€æ ·é€šè¿‡xmlåˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œåœ¨SpringBootä¸­ä¹Ÿæä¾›äº†ç›¸åŒæ³¨è§£å¦‚	`@Configuration`+`@Bean`æ³¨è§£è¿›è¡Œåˆ›å»º

- `@Configuration` ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªspringçš„é…ç½®ç±»ç›¸å½“äºSpring.xmlé…ç½®æ–‡ä»¶
- `@Bean` ç”¨æ¥åœ¨å·¥å‚ä¸­åˆ›å»ºè¿™ä¸ª@Beanæ³¨è§£æ ‡è¯†çš„å¯¹è±¡
- é»˜è®¤ä½¿ç”¨@Beanåˆ›å»ºå¯¹è±¡åœ¨å·¥å‚ä¸­å”¯ä¸€æ ‡è¯†ä¸º***æ–¹æ³•åç§°\***
- ä¿®æ”¹åœ¨å·¥å‚ä¸­å¯¹è±¡æ ‡è¯†å¯ä»¥åœ¨ä½¿ç”¨@Bean("å·¥å‚ä¸­åå­—")æŒ‡å®šä¸€ä¸ªåå­—

â€‹		**ç®¡ç†å¤æ‚å¯¹è±¡çš„åˆ›å»º**

```
@Configuration      
public class Beans {
    @Bean
    public Calendar calendar(){
        return Calendar.getInstance();
    }
}
```

ğŸ’¡TIP

`@Configuration` ä¿®é¥°èŒƒå›´ï¼šåªèƒ½ç”¨åœ¨<u>ç±»ä¸Š</u>

ä½œç”¨ï¼šä»£è¡¨è¿™ä¸ªç±»æ˜¯é…ç½®ç±»=====>spring.xml

`@Bean` ä¿®é¥°èŒƒå›´ï¼šç”¨åœ¨<u>æ–¹æ³•</u>æˆ–è€…<u>æ³¨è§£</u>ä¸Š

ä½œç”¨ï¼šç”¨æ¥å°†æ–¹æ³•çš„è¿”å›å€¼äº¤ç»™å·¥å‚ç®¡ç†

æ–¹æ³•åï¼šæ¨èè¿”å›å€¼é¦–å­—æ¯å°å†™ï¼Œä»£è¡¨å½“å‰åˆ›å»ºå¯¹è±¡åœ¨å·¥å‚çš„åç§°

***

## å±æ€§æ³¨å…¥

- **springæ¡†æ¶ä¸­å±æ€§æ³¨å…¥**ï¼š

  Setæ³¨å…¥ï¼ˆçµæ´»ï¼‰ æ„é€ æ³¨å…¥ è‡ªåŠ¨æ³¨å…¥

- **å¼•ç”¨ç±»å‹å±æ€§æ³¨å…¥ï¼š**

  `@Autowired`ï¼šspringæ¡†æ¶ é»˜è®¤æ ¹æ®ç±»å‹æ³¨å…¥

  `@Resource`ï¼šjavaEE è§„èŒƒ é»˜è®¤æ ¹æ®åç§°æ³¨å…¥ è‡ªåŠ¨æ ¹æ®ç±»å‹æ³¨å…¥

**ğŸ’¡TIP**

ç”¨åœ¨æˆå‘˜å˜é‡ä¸Š æˆ–è€… æˆå‘˜å˜é‡çš„Get Setæ–¹æ³•ä¸Š

å…«ç§æ•°æ®ç±»å‹ + Stringç±»å‹ + æ—¥æœŸç±»å‹ value + æ•°ç»„ + set list mapæ ‡ç­¾é›†åˆç±»å‹å±æ€§æ³¨å…¥ï¼š

```
@Value("xx")
private string name;
<bean>
    <property name="name" value="yyy">
    <property name="shuzu">
        <array>
            <values>xxx</values>
        </array>
</bean>
```

### SpringBoot å‡çº§

- å±æ€§æ³¨å…¥ï¼š

  `@Value`æ³¨è§£

  `@Autowired`æ³¨è§£

***

## å¯¹è±¡æ–¹æ³•æ³¨å…¥

`@ConfigurationProperties` æ³¨è§£

**ğŸ”¥WARNING**

ä½¿ç”¨å¯¹è±¡æ–¹æ³•æ³¨å…¥ï¼ˆ`@ConfigurationProperties`ï¼‰<u>**å¿…é¡»è¦æœ‰Setæ–¹æ³•**</u>

```
@ConfigurationProperties("orders")  //å¯»æ‰¾ymlæ–‡ä»¶ä¸­orderå¼€å¤´çš„å€¼
@RestController
public class InjectionObjectController {

    private String name;
    private String age;
    private String sex;

    //å¿…é¡»æ·»åŠ setæ–¹æ³•

    public void setName(String name) {
        this.name = name;
    }

    public void setAge(String age) {
        this.age = age;
    }

    public void setSex(String sex) {
        this.sex = sex;
    }
}
```



å¦‚æœæœ‰**<u>é—ªçº¢æç¤º</u>**ï¼Œåˆ™å¯ä»¥å¢åŠ ä¾èµ–æ³¨å…¥å…ƒæ•°æ®

```
<!--è¿™ä¸ªä¾èµ–å¯ä»¥æ ¹æ®@ConfiguractionPropertiesæ„å»ºæ³¨å…¥å…ƒæ•°æ®-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-configuration-processor</artifactId>
            <!--ä»£è¡¨è¿™ä¸ªä¾èµ–ä¸ä¼šè¢«ä¼ é€’-->
            <optional>true</optional>
        </dependency>
```









***

# **<a name=four>JSPæ¨¡æ¿é›†æˆ</a>**

åœ¨SpringBootæ¡†æ¶ä¸­é»˜è®¤æ¨¡æ¿æ¨èä½¿ç”¨**<u>Thymeleaf</u>**æ¨¡æ¿ã€‚

â€‹		**ä¸€ã€å¼•å…¥jspçš„é›†æˆjaråŒ…**

```
        <!--cæ ‡ç­¾åº“-->
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!--è®©å†…åµŒtomcatå…·æœ‰è§£æjspåŠŸèƒ½-->
         
```

1. åœ¨**main**æ–‡ä»¶ä¸‹==åˆ›å»º**webapp**æ–‡ä»¶==
2. åœ¨applicationé…ç½®æ–‡ä»¶ä¸­é…ç½®jspè§†å›¾å‰ç¼€å’Œåç¼€

```
# é…ç½®jspè§†å›¾å‰ç¼€å’Œåç¼€
spring:
  mvc:
    view:
      prefix: /
      suffix: .jsp
```

***

â€‹		**äºŒã€åˆ›å»ºControllerè°ƒç”¨jspæµ‹è¯•**

```
@Controller
public class JspController {

    @RequestMapping("jsp")
    public String jsp(){
        System.out.println("jsp ok");
        //å› ä¸ºæœ‰é…ç½®å‰åç¼€ï¼Œæ‰€ä»¥åªéœ€è¦è¿”å›jspåç§°
        return "index";
    }
}
```

**ğŸ”¥WARNING**

IDEAå·¥å…·æƒ³è¦æ‰¾åˆ°jspéœ€è¦é…ç½®è¿è¡Œç¯å¢ƒï¼Œ`working directory`ä¸­æ·»åŠ `MODULE_DIR`

![image-20220223162909818](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220223162909818.png)

- **åœ¨`applicationä¸­`å¼€å¯jspé¡µé¢çš„å¼€å‘æ¨¡å¼**

```
jsp:
  init-parameters:
      development: true      #å¼€å¯jspé¡µé¢çš„å¼€å‘æ¨¡å¼ ä½œç”¨ï¼šä¿®æ”¹jspé¡µé¢æ— éœ€é‡å¯springbootåº”ç”¨
```









***

# **æ•´åˆMybatisæ¡†æ¶**

æ•°æ®åº“è®¿é—®æ¡†æ¶ï¼š hibernateã€jpaã€mybatisï¼ˆæ¡†æ¶ï¼‰

**springbootæ¡†æ¶ä¸­å¦‚ä½•å»æ•´åˆmybatisæ¡†æ¶ï¼Ÿ**

1. **å¼•å…¥ä¾èµ–**

- springboot-web
- mysqlç›¸å…³ mysqlé©±åŠ¨ druidæ•°æ®æº
- mybatisç›¸å…³ï¼ˆmybtis-spring-boot-staterï¼‰ä¾èµ–ï¼ˆmybatisï¼Œmybatis-springï¼‰

2. **ä¹¦å†™é…ç½®**

- **a.å¼€å¯æ³¨è§£æ‰«æ** `@SpringBootAllication` `@ComponentScan`

- **b.åˆ›å»ºæ•°æ®æº**

  1ï¼‰æŒ‡å®šæ•°æ®æºç±»å‹

  2ï¼‰æŒ‡å®šæ•°æ®åº“é©±åŠ¨

  3ï¼‰æŒ‡å®šurl

  4ï¼‰æŒ‡å®šusername

  5ï¼‰æŒ‡å®špassword

- **c.åˆ›å»ºSqlSessionFactory**

  1ï¼‰æŒ‡å®šmapperé…ç½®æ–‡ä»¶ä½ç½®

  2ï¼‰æŒ‡å®šå®ä½“æ‰€åœ¨çš„åŒ…ä½ç½® èµ·åˆ«å

- **d.åˆ›å»ºDAO**

  1ï¼‰æŒ‡å®šDAOæ¥æ”¶æ‰€åœ¨çš„åŒ…

- e.åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨ å¼€å¯æ³¨è§£äº‹åŠ¡ç”Ÿæ•ˆ

  **çœç•¥**

***

#### 	<a name="five">å¯¼å…¥ä¾èµ–</a>

```
        <!--druid-->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>druid</artifactId>
            <version>1.2.4</version>
        </dependency>

        <!--mysql-->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.19</version>
        </dependency>

        <!--mybatis-spring-boot-stater-->
        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>2.1.4</version>
        </dependency>
```

#### 	æ•´åˆmybatisç›¸å…³é…ç½®

```
#æ•´åˆmybatisç›¸å…³é…ç½®
spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver #mysqlç‰ˆæœ¬
    url: jdbc:mysql://localhost:3306/bootssm?charaterEncoding=UTF-8
    username: root
    passord: root
    
mybatis:
  mapper-locations: classpath:com/yyy/mapper/*.xml  #æŒ‡å®šmapperé…ç½®æ–‡ä»¶ä½ç½®
  type-aliases-package: com.yyy.entity  #æŒ‡å®šå®ä½“ç±»åŒ…å é»˜è®¤åˆ«åï¼šç±»å ç±»åé¦–å­—æ¯å°å†™
```

####      å…¥å£ç±»æ·»åŠ æ³¨è§£

```
@SpringBootApplication
@MapperScan("com.yyy.dao")//ä¿®é¥°èŒƒå›´ï¼šç”¨åœ¨ç±»ä¸Š  ä½œç”¨ï¼šç”¨æ¥æ‰«ædaoæ¥å£æ‰€åœ¨åŒ… åŒæ—¶å°†æ‰€æœ‰daoæ¥å£åœ¨å·¥å‚ä¸­åˆ›å»ºå¯¹è±¡
public class SpringBootTest02Application {

    public static void main(String[] args) {
        SpringApplication.run(SpringBootTest02Application.class, args);
    }

}
```

#### 	 åˆ›å»ºå®ä½“ç±»

```
public class User {
    private Integer id;
    private String name;
    private Date birthday;
    private double salary;

    public User() {
    }

    public User(Integer id, String name, Date birthday, double salary) {
        this.id = id;
        this.name = name;
        this.birthday = birthday;
        this.salary = salary;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Date getBirthday() {
        return birthday;
    }

    public void setBirthday(Date birthday) {
        this.birthday = birthday;
    }

    public double getSalary() {
        return salary;
    }

    public void setSalary(double salary) {
        this.salary = salary;
    }
}
```

#### 	 åˆ›å»ºdaoæ¥å£

```
public interface UserDao {

    //æŸ¥è¯¢æ‰€æœ‰
    List<User> findAll();

    //æ’å…¥
    void save(User user);

}
```

#### 	 åœ¨resourcesä¸­åˆ›å»ºMapperæ–‡ä»¶

```
<mapper namespace="com.yyy.dao.UserDao">

    <select id="findAll" resultType="User">
        select id,name,birthday,salary from user
    </select>

    <insert id="save" parameterType="User" useGeneratedKeys="true" keyProperty="id">
        insert into user values(#{id},#{name},#{birthday},#{salary})
    </insert>

</mapper>
```

#### 	 åˆ›å»ºServiceä»¥åŠå®ç°

- **Serviceï¼š**

```
public interface UserService {
    List<User> findAll();

    void save(User user);
}
```

- **ServiceImplï¼š**

```
@Service
@Transactional
public class UserServiceImpl implements UserService{

    private UserDao userDao;

    @Autowired
    public UserServiceImpl(UserDao userDao) {
        this.userDao = userDao;
    }

    @Override
    public List<User> findAll() {
        return userDao.findAll();
    }

    @Override
    public void save(User user) {
        userDao.save(user);
    }
}
```

#### 	 å¼€å‘controller

```
@RestController
public class UserController {

    private UserDao userDao;

    public UserController(UserDao userDao) {
        this.userDao = userDao;
    }

    @RequestMapping("findAll")
    public List<User> findAll(){
        return userDao.findAll();
    }

    @RequestMapping("save")
    public void save(User user){
        userDao.save(user);
        int n = 1/0;
    }

}
```

***









# **æœ¬åœ°æµ‹è¯•**

## **springä¸­æœ¬åœ°æµ‹è¯•**

1. å¯åŠ¨å·¥å‚

```
AplicationContext context = new ClassPathXmlApplicationContext("spring.xml");
```

2. ä»å·¥å‚ä¸­è·å–æŒ‡å®šå¯¹è±¡

```
UserDao userDao = context.getbean("userDao")
```

3. è°ƒç”¨æ–¹æ³•

```
userDao.xxx(å‚æ•°);
```

## springbootæ¡†æ¶ä¸­å®Œæˆæœ¬åœ°æµ‹è¯•

1. å¼•å…¥ç»“åˆjunitå’Œspringbootçš„ä¾èµ–

```
<dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-starter-test</artifactId>
      <scope>test</scope>
</dependency>
```

2. åˆ›å»ºéœ€è¦æµ‹è¯•çš„ç±»

   ....









***

# **çƒ­éƒ¨ç½²å·¥å…·**

**ğŸ’¡TIP**

â€‹		ä¸ºäº†è¿›ä¸€æ­¥æé«˜å¼€å‘æ•ˆç‡ï¼Œspringbootä¸ºæˆ‘ä»¬æä¾›äº†å…¨å±€é¡¹ç›®çƒ­éƒ¨ç½²ï¼Œæ—¥ååœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¿®æ”¹äº†éƒ¨åˆ†ä»£ç ä»¥åŠç›¸å…³é…ç½®æ–‡ä»¶åï¼Œä¸éœ€è¦æ¯æ¬¡é‡å¯ä½¿ä¿®æ”¹ç”Ÿæ•ˆï¼Œåœ¨é¡¹ç›®ä¸­å¼€å¯äº†springbootå…¨å±€çƒ­éƒ¨ç½²ä¹‹å**<u>åªéœ€è¦åœ¨ä¿®æ”¹ä¹‹åç­‰å¾…å‡ ç§’å³å¯ä¿®æ”¹ç”Ÿæ•ˆ</u>**ã€‚

- **å¼€å¯çƒ­éƒ¨ç½²**

  é¡¹ç›®ä¸­å¼•å…¥ä¾èµ–ï¼ˆæ¯æ¬¡æ­å»ºé¡¹ç›®éƒ½éœ€è¦å¼•å…¥ï¼‰

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <optional>true</optional>
</dependency>
```

- è®¾ç½®ideaä¸­æ”¯æŒè‡ªåŠ¨ç¼–è¯‘ï¼ˆåªéœ€è®¾ç½®ä¸€æ¬¡ï¼‰

```
1.å¼€å¯è‡ªåŠ¨ç¼–è¯‘
    Preferences | Build,Execution,Deployment | Compiler -> å‹¾é€‰ä¸Š Build project automatically è¿™ä¸ªé€‰é¡¹
    
2.å¼€å¯å…è®¸åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¿®æ”¹æ–‡ä»¶
    Settings---->å‹¾é€‰compiler.automake.allow.when.app.runnning è¿™ä¸ªé€‰é¡¹
```









***

# **é¡¹ç›®ç®€ä»‹å’Œåˆ†æ**

ğŸ‡**é¡¹ç›®åï¼šems-jsp**

## ä¸€ã€é¡¹ç›®å¼€å‘æµç¨‹

1. éœ€æ±‚åˆ†æï¼šåˆ†æç”¨æˆ·ä¸»è¦éœ€æ±‚ï¼Œæå–å‡ºé¡¹ç›®æ ¸å¿ƒåŠŸèƒ½ï¼Œæ ¹æ®æ ¸å¿ƒåŠŸèƒ½æ„å»ºé¡µé¢åŸå‹
2. åº“è¡¨è®¾è®¡ï¼ˆæ¦‚è¦è®¾è®¡ï¼‰ï¼š1.åˆ†ææ•´ä¸ªç³»ç»Ÿæœ‰å“ªäº›è¡¨ã€‚2.åˆ†æå‡ºè¡¨ä¹‹é—´å…³è”å…³ç³»ã€‚3.ç¡®å®šå­—æ®µ
3. è¯¦ç»†è®¾è®¡ï¼ˆæµç¨‹å›¾ï¼Œä¼ªä»£ç ï¼‰ï¼šç”¨æ¥éªŒè¯åº“è¡¨çš„å‡†ç¡®æ€§
4. åŠŸèƒ½å®ç°ï¼ˆç¼–ç ï¼‰ï¼šç¯å¢ƒæ­å»ºå’Œå…·ä½“åŠŸèƒ½å®ç°
5. åŠŸèƒ½æµ‹è¯•
6. éƒ¨ç½²
7. ä¸Šçº¿ï¼šè¿ç»´
8. ç»´æŠ¤

> **ğŸ’¡TIP**
>
> **å…¨æ ˆå¼ï¼šå‰ç«¯+åç«¯+è¿ç»´**

## äºŒã€éœ€æ±‚åˆ†æ

- ç³»ç»Ÿä¸­åŒ…å«å“ªäº›æ¨¡å—ï¼Ÿ

- æ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½æœ‰å“ªäº›ï¼Ÿ

  a.**ç”¨æˆ·æ¨¡å—** 

  ç™»å½•ï¼Œæ³¨å†Œï¼ŒéªŒè¯ç ç”Ÿæˆ

  b.**å‘˜å·¥æ¨¡å—** 

  å¢åŠ ï¼Œåˆ é™¤ï¼Œæ›´æ–°ï¼ŒæŸ¥è¯¢

## ä¸‰ã€åº“è¡¨è®¾è®¡

â€‹		ç”¨æˆ·ä¿¡æ¯è¡¨ï¼š	user
â€‹		å‘˜å·¥ä¿¡æ¯è¡¨ï¼š	emp

â€‹		è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ï¼š	**<u>ç›¸äº’ç‹¬ç«‹</u>**

â€‹		**ç¡®å®šå­—æ®µï¼š**

â€‹		**user**ï¼š	idã€usernameã€passwordã€realnameã€sex
â€‹		**emp**ï¼š	idã€nameã€salaryã€birthdayã€sex

â€‹		**æ•°æ®åº“**ï¼š	ems-jsp

## å››ã€è¯¦ç»†è®¾è®¡

â€‹			çœç•¥........

## äº”ã€ç¼–ç ç¯èŠ‚

â€‹			æŠ€æœ¯é€‰å‹ï¼šspringboot + mybatis + jsp + mysql
â€‹			ç¯å¢ƒæ­å»ºï¼šspringboot + jsp + mybatis

â€‹			







***

# **é¡¹ç›®ç¯å¢ƒæ­å»ºä¸å®ç°**

## é¡¹ç›®åˆ›å»º

é¦–å…ˆåˆ›å»ºmavené¡¹ç›®ï¼Œè¯¦ç»†æ­¥éª¤å¯è·³è½¬åˆ°<a href="#one">#Springé¡¹ç›®çš„æ­å»º</a>

**==åˆ›å»ºæ–‡ä»¶ï¼š==**

**Employeeï¼ˆå®ä½“ç±»ï¼‰ ---> EmployeeMapperï¼ˆé…ç½®æ–‡ä»¶ï¼‰ ---> EmployeeDaoï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰ ---> EmployeeSerivceï¼ˆä¸šåŠ¡å±‚ï¼‰ ---> EmployeeSerivceImplï¼ˆä¸šåŠ¡å®ç°ç±»ï¼‰ ---> EmployeeControllerï¼ˆæ§åˆ¶å™¨ï¼‰**

1. Employeeï¼ˆå®ä½“ç±»ï¼‰ï¼šåˆ›å»ºå„ä¸ªå­—æ®µï¼Œç”Ÿæˆ getã€setæ–¹æ³• å’Œ ==æœ‰å‚æ„é€ å‡½æ•°ã€æ— å‚æ„é€ å‡½æ•°==
2. EmployeeMapperï¼ˆé…ç½®æ–‡ä»¶ï¼‰ï¼šæ³¨æ„selectè¯­å¥å’Œ==è¾“å…¥è¾“å‡ºçš„ç±»å‹==
3. EmployeeDaoï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰ï¼šé…ç½®è¿›å…¥mapperæ–‡ä»¶ä¸­sqlæ“ä½œè¯­å¥æ–¹æ³•
4. EmployeeSerivceï¼ˆä¸šåŠ¡å±‚ï¼‰ï¼šåˆ›å»ºæ§åˆ¶å™¨æ‰€éœ€çš„å„ç§æ–¹æ³•
5. EmployeeSerivceImplï¼ˆä¸šåŠ¡å®ç°ç±»ï¼‰ï¼šå®ç°ä¸šåŠ¡å±‚çš„æ–¹æ³•ï¼Œè¯¦ç»†è¿›è¡Œæ–¹æ³•çš„è®¾è®¡
6. EmployeeControllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼šä¸å‰ç«¯jsè¿›è¡Œäº¤äº’ï¼Œé…åˆä¸€äº›æ–¹æ³•å®ç°æ•´ä¸ªé¡µé¢çš„è¿è¡Œ

## é…ç½®pomä¸applicationæ–‡ä»¶

é…ç½®mybatisã€jspè§£æã€springbootã€æ¿€æ´»jspç­‰ï¼Œè¯¦ç»†æ­¥éª¤å¯è·³è½¬åˆ°<a href="#five">#æ•´åˆMybatisæ¡†æ¶</a>å’Œ<a href="#four">#JSPæ¨¡æ¿é›†æˆ</a>

## **ç”¨æˆ·æ¨¡å—åŠŸèƒ½å®ç°**

å°†å‰ç«¯ç›¸å…³æ–‡ä»¶æ‹–å…¥==webapp==ä¸­

### **ç”¨æˆ·æ³¨å†Œé¡µé¢**

1. **éªŒè¯ç ç”ŸæˆåŠŸèƒ½å®ç°**

   ![image-20220227160705916](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220227160705916.png)

   1ï¼‰.å¯¼å…¥ç½‘ä¸Šç°æœ‰çš„éªŒè¯ç ç±»VerifyCodeUtilsåœ¨UtilsåŒ…ä¸­ã€‚
   
   2ï¼‰.åˆ›å»ºUserControlleræ§åˆ¶å™¨ï¼Œå¯¹éªŒè¯ç çš„å½¢æˆè¿›è¡Œæ§åˆ¶
   
   3ï¼‰.Controllerå…·ä½“é…ç½®
   
   ```
   @Controller
   @RequestMapping("user")
   public class UserController {
       @RequestMapping("usercode")		//userä¸usercodeæ˜¯è·¯å¾„ã€‚åˆ›å»ºsessionä¸response
       public void GenerateUserCode(HttpSession session, HttpServletResponse response) throws IOException {
           //1.ç”Ÿæˆéšæœºæ•°,4ä½
           String code = VerifyCodeUtils.generateVerifyCode(4);
           //2.å°†éšæœºæ•°codeå­˜å…¥sessionä¸­
           session.setAttribute("code",code);
           //3.ç”Ÿæˆå›¾ç‰‡
           //4.é€šè¿‡responseå“åº”å›¾ç‰‡
           response.setContentType("image/png");//æŒ‡å®šå“åº”ç±»å‹ï¼Œpngæ ¼å¼
           ServletOutputStream os = response.getOutputStream();
           VerifyCodeUtils.outputImage(220,80,os,code);
       }
   }
   ```
   
   4ï¼‰.å°†regist.htmlä¿®æ”¹ä¸ºregist.jspï¼Œå¹¶æ·»åŠ åŒ…å¤´é…ç½®
   
   ```
   <%@page pageEncoding="UTF-8" contentType="text/html; UTF-8" isELIgnored="false" %>
   ```
   
   5ï¼‰.åœ¨jspé¡µé¢ä¸­çš„éªŒè¯ç æ å°†srcè·¯å¾„ä¿®æ”¹ä¸ºControlleré…ç½®çš„éªŒè¯ç ç”Ÿæˆè·¯å¾„
   
   ```
   <img id="num" src="${pageContext.request.contextPath}/user/usercode" /><%--å£°æ˜${pageContext.request.contextPath}æŒ‡åŠ¨æ€åœ°å€--%>
   <a href="javascript:;" onclick="document.getElementById('num').src = '${pageContext.request.contextPath}/user/usercode?'+(new Date()).getTime()">æ¢ä¸€å¼ </a>
   ```

2. **ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½å®ç°**

   1ï¼‰.åœ¨entityåŒ…ä¸­åˆ›å»ºUserå®ä½“ç±»ï¼ˆä¸æ•°æ®åº“å­—æ®µ==ç›¸åŒ==ï¼Œåˆ›å»ºUserçš„==æ— å‚æ„é€ ==å‡½æ•°ä¸==æœ‰å‚æ„é€ ==å‡½æ•°ï¼‰
   
   ```
   public class User {
       private Integer id;
       private String username;
   
       public User() {
   
       }
   
       public User(Integer id, String username, String password, boolean sex, String realname) {
           this.id = id;
           this.username = username;
           this.password = password;
           this.sex = sex;
           this.realname = realname;
       }
   
       private String password;
       private boolean sex;
       private String realname;
   
       public Integer getId() {
           return id;
       }
   
       public void setId(Integer id) {
           this.id = id;
       }
   
       public String getUsername() {
           return username;
       }
   
       public void setUsername(String username) {
           this.username = username;
       }
   
       public String getPassword() {
           return password;
       }
   
       public void setPassword(String password) {
           this.password = password;
       }
   
       public boolean isSex() {
           return sex;
       }
   
       public void setSex(boolean sex) {
           this.sex = sex;
       }
   
       public String getRealname() {
           return realname;
       }
   
       public void setRealname(String realname) {
           this.realname = realname;
       }
   }
   ```
   
   2ï¼‰.åœ¨zï¼ˆæ„å»º==serviceä¸šåŠ¡å¯¹è±¡==ï¼Œå®ç°æ³¨å†Œæ–¹æ³•ï¼‰
   
   â€‹		é€»è¾‘ï¼šåœ¨æ³¨å†Œå‰è¦æŸ¥çœ‹æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨==ä¸€è‡´çš„ç”¨æˆ·å==ï¼Œè‹¥å­˜åœ¨å³æ³¨å†Œå¤±è´¥ã€‚
   
   ```
   //åˆ›å»ºserviceä¸šåŠ¡å¯¹è±¡ä¸æ„é€ å‡½æ•°ï¼ˆæ·»åŠ "è‡ªåŠ¨æ³¨å…¥"æ³¨è§£ï¼‰
       private UserSerivce userSerivce;
       @Autowired
       public UserController(UserSerivce userSerivce) {
           this.userSerivce = userSerivce;
       }
   
   //ç”¨æˆ·æ³¨å†Œ
       @RequestMapping("register")
       public String  register(User user,String code,HttpSession session) throws UnsupportedEncodingException {
           try {
               //1.æ‹¿åˆ°sessionä¸­çš„éªŒè¯ç åˆ¤æ–­æ˜¯å¦å’Œç”¨æˆ·è¾“å…¥ä¸€è‡´
               String  sessioncode = session.getAttribute("code").toString();
               if (!sessioncode.equalsIgnoreCase(code)) throw new RuntimeException("éªŒè¯ç é”™è¯¯"); //è¿›è¡Œåˆ¤æ–­
               //2.å¦‚æœéªŒè¯ç æ­£ç¡®ï¼Œè¿›è¡Œæ³¨å†Œæ“ä½œ
               userSerivce.register(user);
           } catch (RuntimeException e) {
               e.printStackTrace();
               //å¦‚æœæ³¨å†Œå¤±è´¥ï¼Œé‡å®šå‘åˆ°æ³¨å†Œé¡µé¢ã€‚å¹¶æ˜¾ç¤ºéªŒè¯ç é”™è¯¯çš„æç¤º
               return "redirect:/regist.jsp?msg=" + URLEncoder.encode(e.getMessage(),"UTF-8");
           }
           //å¦‚æœè¿è¡Œæ²¡é—®é¢˜ï¼Œé‡å®šå‘åˆ°login.jsp
           return "redirect:/login.jsp";
       }
   ```
   
   3ï¼‰.Controllerè¿›å…¥serviceä¸šåŠ¡å±‚å®Œæˆæ³¨å†Œæ“ä½œï¼ˆæ„å»ºä¸šåŠ¡å®ç°ç±»æ—¶è¦==è°ƒç”¨daoå±‚==æ¥ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼‰
   
   â€‹		UserServiceæ¥å£ï¼š
   
   ```
   //ä¸šåŠ¡å±‚ï¼Œç”¨äºå®Œæˆæ§åˆ¶å™¨æ‰€è°ƒç”¨çš„æ–¹æ³•
   public interface UserSerivce {
       void register(User user);
   }
   ```
   
   â€‹		UserServiceImplä¸šåŠ¡å®ç°ç±»ï¼šï¼ˆæ„å»ºuserdaoå¯¹è±¡ä¸æ„é€ æ–¹æ³•ï¼Œæ³¨æ„==å¯†ç åŠ å¯†==ï¼‰
   
   ```
   @Service
   @Transactional
   public class UserServiceImpl implements UserSerivce{
   
       //æ„å»ºuserdaoå¯¹è±¡ä¸æ„é€ å‡½æ•°ï¼Œè°ƒç”¨å…¶ä¸­çš„sqlè¯­å¥
       private UserDao userDao;
       @Autowired
       public UserServiceImpl(UserDao userDao) {
           this.userDao = userDao;
       }
   
       @Override
       public void register(User user) {
           //1.æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ¥çœ‹æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç”¨æˆ·
           User userDB = userDao.findUsername(user.getUsername());
           //2.å¦‚æœå­˜åœ¨ä¾¿æŠ¥é”™
           if (!ObjectUtils.isEmpty(userDB)) throw new RuntimeException("è¯¥ç”¨æˆ·åå·²å­˜åœ¨");
           //3.æ³¨å†Œä¹‹å‰è¿›è¡Œå¯†ç åŠ å¯†
           String passwordSecret = DigestUtils.md5DigestAsHex(user.getPassword().getBytes(StandardCharsets.UTF_8));
           user.setPassword(passwordSecret);
           //4.ç”¨æˆ·è¿›è¡Œæ³¨å†Œ
           userDao.saveUser(user);
       }
   }
   ```
   
   4ï¼‰.åˆ›å»ºDaoæ¥å£ï¼ˆå®Œæˆå¯¹mapperæ–‡ä»¶çš„è°ƒç”¨ï¼‰
   
   ```
   //UserDaoç”¨äºè°ƒç”¨mapperæ–‡ä»¶ä¸­çš„selectæ–¹æ³•
   @Component
   public interface UserDao {
       User findUsername(String username);
   
       void saveUser(User user);
   }
   ```
   
   5ï¼‰.åœ¨resourcesæ–‡ä»¶åˆ›å»ºMapperæ–‡ä»¶ï¼ˆæ³¨æ„ï¼šé…ç½®æ–‡ä»¶ä¸­æœç´¢çš„xmlæ–‡ä»¶è·¯å¾„è¦==ä¸€è‡´==ï¼‰
   
   ```
   <mapper namespace="com.example.dao.UserDao">
       <!--æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·   æŸ¥æ‰¾ç±»å‹string  è¿”å›ç±»å‹User-->
       <select id="findUsername" parameterType="String" resultType="User">
           select id,username,password,realname,sex from user where username = #{username}
       </select>
   
       <!--æ’å…¥-->
       <insert id="saveUser" parameterType="User" useGeneratedKeys="true" keyProperty="id">
           insert into user values(#{id},#{username},#{password},#{sex},#{realname})
       </insert>
   </mapper>
   ```
   
   6ï¼‰.ä¿®æ”¹regist.jspæ–‡ä»¶
   
   â€‹		![image-20220303165815253](C:\Users\19770\AppData\Roaming\Typora\typora-user-images\image-20220303165815253.png)

â€‹				1.è¾“å‡ºUserControllerä¸­çš„é”™è¯¯ä¿¡æ¯
â€‹				2.formè¡¨å•å®šå‘åˆ°æ§åˆ¶å™¨çš„==æ³¨å†Œæ–¹æ³•==ä¸­
â€‹				3.å°†inputä¸­è¿”å›çš„nameä¿®æ”¹ä¸ºä¸Userå®ä½“ç±»ä¸­çš„å­—æ®µåä¸€æ ·

### **ç”¨æˆ·ç™»å½•é¡µé¢**

1. åœ¨UserControllerä¸­åˆ›å»ºç™»å½•ä»£ç ï¼ˆæ³¨æ„ï¼šå°†æ­£ç¡®çš„ç”¨æˆ·ä¿¡æ¯å­˜å…¥==session==ä¸­ï¼‰

   1ï¼‰.åˆ©ç”¨æ³¨å†ŒåŠŸèƒ½ä¸­çš„æŸ¥è¯¢æ–¹æ³•è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢

   2ï¼‰.æ·»åŠ ä¸šåŠ¡å±‚ä¸­çš„loginæ–¹æ³•ï¼Œå¹¶å°†å®ƒå­˜å…¥userå¯¹è±¡ä¸­

   3ï¼‰.å°†userå¯¹è±¡ä¸­çš„ç”¨æˆ·ä¿¡æ¯å­˜å…¥sessionå¯„å­˜å™¨å½“ä¸­

   ```
       //ç”¨æˆ·ç™»å½•
       @RequestMapping("login")
       public String login(String username,String password,HttpSession session) throws UnsupportedEncodingException {
           try {
               //1.æŸ¥è¯¢è¾“å…¥çš„è´¦å·å¯†ç æ˜¯å¦å’Œæ•°æ®åº“ä¸­çš„ä¸€è‡´
               User user = userSerivce.login(username,password);
               //å°†userçš„ä¿¡æ¯å­˜å…¥sessionä¸­
               session.setAttribute("User",user);
           } catch (Exception e) {
               e.printStackTrace();
               //2.å¦‚æœä¸ä¸€è‡´å°±é‡å®šå‘åˆ°loginé¡µé¢
               return "redirect:/login.jsp?+msg=" + URLEncoder.encode(e.getMessage(),"UTF-8");//æ‰“å°ä¿¡æ¯
           }
           return "redirect:/emplist.jsp";
       }
   ```

2. åœ¨serviceä¸šåŠ¡å±‚æ·»åŠ loginæ–¹æ³•å¹¶å®ç°ï¼ˆæ³¨æ„ä½¿ç”¨==daoå±‚==ï¼‰

   1ï¼‰.serviceæ¥å£ä¸­æ·»åŠ Userå‡½æ•°ï¼š

   ```
   User login(String username, String password);
   ```

   2ï¼‰.serviceä¸šåŠ¡å®ç°ç±»æ·»åŠ Userå‡½æ•°çš„å®ç°ï¼š

   ```
   //ç™»å½•å®ç°
       @Override
       public User login(String username, String password) {
           //1.æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ¥çœ‹æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç”¨æˆ·
           User userlogin = userDao.findUsername(username);
           if (ObjectUtils.isEmpty(userlogin)) throw new RuntimeException("è¯¥ç”¨æˆ·åä¸å­˜åœ¨");
   
           //2.å¦‚æœå­˜åœ¨ï¼Œæ—¢éªŒè¯å¯†ç æ˜¯å¦ä¸€è‡´ï¼ˆæ³¨æ„æ˜¯åŠ å¯†å¯†ç ï¼‰
           String passwordSecret = DigestUtils.md5DigestAsHex(password.getBytes(StandardCharsets.UTF_8));
           if (!userlogin.getPassword().equalsIgnoreCase(passwordSecret)) throw new RuntimeException("å¯†ç é”™è¯¯");
   
           //è¿”å›userç”¨æˆ·çš„ç™»å½•ä¿¡æ¯
           return userlogin;
       }
   ```



## **å‘˜å·¥æ¨¡å—åŠŸèƒ½å®ç°**

### **å‘˜å·¥ä¿¡æ¯æ˜¾ç¤º**

**==å¤§è‡´æµç¨‹ï¼š==**

**ç”¨æˆ·æˆåŠŸéªŒè¯ç™»å½• ---> åˆ©ç”¨Liståˆ—è¡¨å»æ•°æ®åº“æŸ¥è¯¢ ---> å°†ä¿¡æ¯æ”¾åœ¨ä½œç”¨åŸŸä¸­ ---> åœ¨jsé¡µé¢ä¸­å±•ç¤ºä½œç”¨åŸŸå­˜å‚¨çš„å­—æ®µ**

EmployeeControllerï¼š

```
@Controller
@RequestMapping("employee")
public class EmployeeController {

    private EmployeeSerivce employeeSerivce;

    public EmployeeController(EmployeeSerivce employeeSerivce) {
        this.employeeSerivce = employeeSerivce;
    }

    //liståˆ—è¡¨æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ã€‚
    @RequestMapping("list")
    public String list(Model model){
        //è·å¾—å‘˜å·¥åˆ—è¡¨
        List<Employee> employees = employeeSerivce.list();
        //å°†å‘˜å·¥åˆ—è¡¨æ”¾å…¥ä½œç”¨åŸŸä¸­ï¼Œä¼ è¾“åˆ°å‰ç«¯jsé¡µé¢æ˜¾ç¤º
        model.addAttribute("employees",employees);
        return "emplist";
    }
}
```

**==æ³¨æ„ï¼š==**
	**ServletRequestï¼ˆå•ä¸ªè¯·æ±‚ï¼‰ï¼ŒHttpSessionï¼ˆå•æ¬¡ä¼šè¯ï¼‰ï¼ŒServletContextï¼ˆæ•´ä¸ªwebåº”ç”¨ï¼‰ä¸‰å¤§ä½œç”¨åŸŸ**
	æ¯æ¬¡è¿›è¡Œliståˆ—è¡¨æŸ¥è¯¢**åªéœ€è¦ä¸€æ¬¡**å³å¯ï¼Œä¸éœ€è¦ä¸€æ•´ä¸ªä¼šè¯æˆ–è€…webåº”ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ServletRequest
	Modelï¼šä½œä¸ºæ•°æ®æµè½¬çš„è½½ä½“ï¼Œmodelå¯¹è±¡ä¸­å­˜å‚¨çš„æ•°æ®ï¼Œ==ç›¸å½“äºå­˜å‚¨åˆ°äº†requestå¯¹è±¡ä¸­==

å‰©ä¸‹çš„æ“ä½œä¸€è·¯ alt+å›è½¦ åˆ›å»ºå³å¯

åˆ‡è®°è¦æŠŠUserControllerä¸­çš„ç™»å½•æ–¹æ³•é‡å®šå‘åˆ°EmployeeControllerçš„listæ–¹æ³•ä¸­

åœ¨JSPé¡µé¢ä¸­ç”¨Cæ ‡ç­¾å¾ªç¯éå†modelä¸­çš„é›†åˆ

```
<c:forEach items="${requestScope.employees}" var="employee">
							<tr class="row1">
								<td >${employee.id}</td>
								<td >${employee.name}</td>
								<td >${employee.salary}</td>
								<td ><fmt:formatDate value="${employee.birthday}"/></td>
								<td >${employee.sex?'ç”·':'å¥³'}</td>
								<td>
									<a href="">åˆ é™¤</a>&nbsp;
									<a href="${pageContext.request.contextPath}/employee/ById?id=${employee.id}">æ›´æ–°</a>
								</td>
							</tr>
						</c:forEach>
```

ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦è°ƒæ•´æ€§åˆ«çš„æ˜¾ç¤ºï¼Œä½¿ç”¨fmtæ ‡ç­¾å®šä¹‰æ—¶é—´çš„æ˜¾ç¤ºæ ¼å¼///

### **å‘˜å·¥æ·»åŠ é¡µé¢**

1. å°†å‘˜å·¥ä¿¡æ¯é¡µé¢ä¸­çš„â€œæ·»åŠ å‘˜å·¥â€é”®ä½å®šä¹‰ä¸º**æœ¬é¡¹ç›®è·¯å¾„**

   ```
   <a href="${pageContext.request.contextPath}/addEmp.jsp">æ·»åŠ å‘˜å·¥ä¿¡æ¯</a>
   ```

2. æŒ‰é¡¹ç›®åˆ›å»ºæµç¨‹è¿›è¡Œsqlçš„æ’å…¥æ“ä½œæµç¨‹

3. mapperæ–‡ä»¶ï¼š

   ```
   <insert id="add" parameterType="Employee" useGeneratedKeys="true" keyProperty="id">
       insert into emp values(#{id},#{name},#{birthday},#{salary},#{sex})
   </insert>
   ```

### **å‘˜å·¥æ›´æ–°é¡µé¢**

**==å¤§è‡´æµç¨‹ï¼š==**

æ›´æ”¹æŸä¸ªå‘˜å·¥çš„ä¿¡æ¯ï¼Œå‰ææ˜¯å¾—åˆ°é€‰æ‹©å‘˜å·¥çš„ä¿¡æ¯ ---> æ ¹æ®IDæŸ¥è¯¢éœ€è¦ä¿®æ”¹ä¿¡æ¯å‘˜å·¥çš„ä¿¡æ¯ ---> æŸ¥è¯¢å‡ºç»“æœåç”¨ä½œç”¨åŸŸæ˜¾ç¤ºåˆ°JSé¡µé¢ä¸­ ---> è¿›è¡Œupdateæ“ä½œ

EmployeeControllerï¼š

```
    //æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯
    @RequestMapping("ById")
    public String ByIdEmployee(Model model,Integer id){
        Employee employee = employeeSerivce.ById(id);
        model.addAttribute("employee",employee);
        return "updateEmp";
    }

    //æ›´æ–°å‘˜å·¥ä¿¡æ¯æ“ä½œ
    @RequestMapping("update")
    public String update(Employee employee){
        employeeSerivce.update(employee);
        log.println(employee.getName());
        return "redirect:/employee/list";
    }
}
```

JSé¡µé¢ï¼š

```
<tr>
								<td valign="middle" align="right">
									name:
								</td>
								<td valign="middle" align="left">
									<input type="text" class="inputgri" name="name" value="${employee.name}"/>
								</td>
							</tr>
							<tr>
								<td valign="middle" align="right">
									salary:
								</td>
								<td valign="middle" align="left">
									<input type="text" class="inputgri" name="salary" value="${employee.salary}"/>
								</td>
							</tr>
```

==æ³¨æ„==ï¼šå°†valueå€¼æ”¹ä¸ºmodelè½¬è½½çš„å‘˜å·¥ä¿¡æ¯

jSé¡µé¢ä¸­ä¿®æ”¹æ€§åˆ«å’Œç”Ÿæ—¥çš„æ˜¾ç¤ºï¼š

```
<tr>
								<td valign="middle" align="right">
									bir:
								</td>
								<td valign="middle" align="left">
									<input type="text" class="inputgri" name="birthday" value="<fmt:formatDate value="${employee.birthday}" pattern="yyyy-MM-dd"/>"/>
								</td>
							</tr>
							<tr>
								<td valign="middle" align="right">
									sex:
								</td>
								<td valign="middle" align="left">
									<select name="sex">
										<option value="1"
												<c:if test="${emloyee.sex}">
													selected
												</c:if>
										>ç”·</option>
										<option value="0"
												<c:if test="${!emloyee.sex}">
													selected
												</c:if>
										>å¥³</option>
									</select>
								</td>
							</tr>
```

### **å‘˜å·¥åˆ é™¤é¡µé¢**ï¼ˆç¡®è®¤å¯¹è¯æ¡†ï¼‰

å…·ä½“ä¸šåŠ¡å¦‚ä¸Š

==æ³¨æ„==ï¼šåˆ é™¤æ—¶ä¸€å®šè¦æ·»åŠ å¯¹è¯æ¡†ï¼Œä¸ç„¶å®¹æ˜“è¯¯æ“ä½œã€‚å®šä¹‰ç‚¹å‡»æ–¹æ³•"deleteEmployee()"ï¼Œåœ¨<script>æ ‡ç­¾ä¸­è®¾è®¡å…·ä½“æ–¹æ³•è¿›è¡Œå®ç°

```
<a href="javascript:;" onclick="deleteEmployee()"> åˆ é™¤</a>&nbsp;
									<script>
										function deleteEmployee(){
											if(window.confirm("æ‚¨ç¡®å®šè¦åˆ é™¤è¿™æ¡ä¿¡æ¯ä¹ˆï¼Ÿ")){
												location.href='${pageContext.request.contextPath}/employee/delete?id=${employee.id}';
											}
										}
									</script>
```



# **æ–‡ä»¶ä¸Šä¼ **

1. **æ–‡ä»¶ä¸Šä¼ **

   â€‹	æ–‡ä»¶ä¸Šä¼ ï¼šç”¨æˆ·å°†æœ¬åœ°è®¡ç®—æœºä¸­æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨è¿‡ç¨‹ç§°ä¹‹ä¸ºæ–‡ä»¶ä¸Šä¼ 

2. **æ–‡ä»¶ä¸Šä¼ å¼€å‘æ€è·¯**

   1. æä¾›ä¸€å¼ ä¸Šä¼ é¡µé¢		æäº¤æ–¹å¼å¿…é¡»ï¼špost		enctypeå±æ€§å¿…é¡»ä¸º multipart/form-data
   2. å¼€å‘ä¸Šä¼ Controller

